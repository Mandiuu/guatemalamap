<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Guatemala — Occidente + Altiplano Norte</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    html, body { height: 100%; margin: 0; }
    #map { width: 100%; height: 100%; }
    .legend {
      background: #fff; padding: 8px 10px; border: 1px solid #ccc; border-radius: 4px;
      font: 12px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      box-shadow: 0 1px 3px rgba(0,0,0,0.15);
    }
    .sw { display:inline-block; width:12px; height:12px; border-radius:50%; margin-right:6px; vertical-align:middle; }
  </style>
</head>
<body>
  <div id="map"></div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    const map = L.map('map').setView([15.2, -90.5], 7);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '© OpenStreetMap contributors'
    }).addTo(map);

    const occidenteAmpliado = new Set([
      // Altiplano Norte
      "Alta Verapaz (Cobán)",
      "Baja Verapaz (Salamá)",
      // Altiplano Occidental (clásico)
      "Huehuetenango",
      "Quiché (Santa Cruz del Quiché)",
      "Totonicapán",
      "Quetzaltenango",
      "San Marcos",
      "Sololá",
      "Chimaltenango",
      // Incluidos en la definición amplia de Occidente
      "Sacatepéquez (Antigua Guatemala)",
      "Escuintla",
      "Retalhuleu",
      "Suchitepéquez (Mazatenango)"
    ]);

    // Los 22 departamentos con coordenadas de capital
    const departamentos = [
      // Rojos (occidente ampliado + altiplano norte)
      ["Alta Verapaz (Cobán)",        15.4710, -90.3710],
      ["Baja Verapaz (Salamá)",       15.1020, -90.3180],
      ["Huehuetenango",               15.3206, -91.4708],
      ["Quiché (Santa Cruz del Quiché)", 15.0300, -91.1480],
      ["Totonicapán",                 14.9130, -91.3600],
      ["Quetzaltenango",              14.8345, -91.5180],
      ["San Marcos",                  14.9630, -91.7940],
      ["Sololá",                      14.7722, -91.1830],
      ["Chimaltenango",               14.6610, -90.8190],
      ["Sacatepéquez (Antigua Guatemala)", 14.5590, -90.7330],
      ["Escuintla",                   14.3050, -90.7860],
      ["Retalhuleu",                  14.5370, -91.6770],
      ["Suchitepéquez (Mazatenango)", 14.5347, -91.5040],

      // Azules (resto del país)
      ["Guatemala (Guatemala City)",  14.6349, -90.5069],
      ["Izabal (Puerto Barrios)",     15.7270, -88.5940],
      ["Petén (Flores)",              16.9226, -89.8930],
      ["Chiquimula",                  14.8000, -89.5450],
      ["Zacapa",                      14.9722, -89.5306],
      ["Jalapa",                      14.6344, -89.9889],
      ["Jutiapa",                     14.2911, -89.8958],
      ["Santa Rosa (Cuilapa)",        14.2770, -90.2980],
      ["El Progreso (Guastatoya)",    14.8500, -90.0667]
    ];

    function addCircle(lat, lon, name) {
      const rojo = occidenteAmpliado.has(name);
      const color = rojo ? "#d33" : "#3388ff";
      const m = L.circleMarker([lat, lon], {
        radius: 7, color, weight: 2, fillColor: color, fillOpacity: 0.9
      }).addTo(map);
      m.bindPopup(`<b>${name}</b><br/>${rojo ? "Western and northern highlands" : "Otro departamento"}`);
      m.bindTooltip(name, {sticky: true});
      return m.getLatLng();
    }

    const pts = departamentos.map(([name, lat, lon]) => addCircle(lat, lon, name));
    map.fitBounds(L.latLngBounds(pts).pad(0.06));

    // Leyend
    const legend = L.control({position: 'bottomleft'});
    legend.onAdd = function() {
      const div = L.DomUtil.create('div', 'legend');
      div.innerHTML = `
        <div><span class="sw" style="background:#d33"></span>Western and northern highlands</div>
        <div><span class="sw" style="background:#3388ff"></span>Other departments</div>
      `;
      return div;
    };
    legend.addTo(map);
  </script>
</body>
</html>
